{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/alpha/code/%40redbtn/webapp/src/lib/conversation.ts"],"sourcesContent":["/**\n * Types for the chat application\n */\n\nexport interface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  thinking?: string; // Extracted thinking/reasoning (if present)\n  timestamp: number;\n}\n\nexport interface Conversation {\n  id: string;\n  title: string;\n  titleSetByUser?: boolean; // True if user manually set the title\n  messages: Message[];\n  createdAt: number;\n  updatedAt: number;\n}\n\n/**\n * LocalStorage utilities for conversation management\n */\nconst CONVERSATIONS_KEY = 'red_conversations';\nconst ACTIVE_CONVERSATION_KEY = 'red_active_conversation';\n\nexport const conversationStorage = {\n  /**\n   * Get all conversations\n   */\n  getAll(): Conversation[] {\n    if (typeof window === 'undefined') return [];\n    const stored = localStorage.getItem(CONVERSATIONS_KEY);\n    return stored ? JSON.parse(stored) : [];\n  },\n\n  /**\n   * Get a specific conversation by ID\n   */\n  get(id: string): Conversation | null {\n    const conversations = this.getAll();\n    return conversations.find(c => c.id === id) || null;\n  },\n\n  /**\n   * Save a conversation\n   */\n  save(conversation: Conversation): void {\n    const conversations = this.getAll();\n    const index = conversations.findIndex(c => c.id === conversation.id);\n    \n    if (index >= 0) {\n      conversations[index] = conversation;\n    } else {\n      conversations.push(conversation);\n    }\n    \n    localStorage.setItem(CONVERSATIONS_KEY, JSON.stringify(conversations));\n  },\n\n  /**\n   * Delete a conversation\n   */\n  delete(id: string): void {\n    const conversations = this.getAll().filter(c => c.id !== id);\n    localStorage.setItem(CONVERSATIONS_KEY, JSON.stringify(conversations));\n  },\n\n  /**\n   * Get active conversation ID\n   */\n  getActiveId(): string | null {\n    if (typeof window === 'undefined') return null;\n    return localStorage.getItem(ACTIVE_CONVERSATION_KEY);\n  },\n\n  /**\n   * Set active conversation ID\n   */\n  setActiveId(id: string): void {\n    localStorage.setItem(ACTIVE_CONVERSATION_KEY, id);\n  },\n\n  /**\n   * Create a new conversation\n   */\n  create(): Conversation {\n    const conversation: Conversation = {\n      id: `conv_${Date.now()}_${Math.random().toString(36).substring(7)}`,\n      title: 'New Conversation',\n      messages: [],\n      createdAt: Date.now(),\n      updatedAt: Date.now()\n    };\n    \n    this.save(conversation);\n    return conversation;\n  },\n\n  /**\n   * Add a message to a conversation\n   */\n  addMessage(conversationId: string, message: Message): void {\n    const conversation = this.get(conversationId);\n    if (!conversation) return;\n    \n    conversation.messages.push(message);\n    conversation.updatedAt = Date.now();\n    \n    // Update title from first message if still \"New Conversation\"\n    if (conversation.title === 'New Conversation' && message.role === 'user') {\n      conversation.title = message.content.substring(0, 50) + (message.content.length > 50 ? '...' : '');\n    }\n    \n    this.save(conversation);\n  }\n};\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AAmBD;;CAEC,GACD,MAAM,oBAAoB;AAC1B,MAAM,0BAA0B;AAEzB,MAAM,sBAAsB;IACjC;;GAEC,GACD;QACE;;QACA,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,OAAO,SAAS,KAAK,KAAK,CAAC,UAAU,EAAE;IACzC;IAEA;;GAEC,GACD,KAAI,EAAU;QACZ,MAAM,gBAAgB,IAAI,CAAC,MAAM;QACjC,OAAO,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO;IACjD;IAEA;;GAEC,GACD,MAAK,YAA0B;QAC7B,MAAM,gBAAgB,IAAI,CAAC,MAAM;QACjC,MAAM,QAAQ,cAAc,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,aAAa,EAAE;QAEnE,IAAI,SAAS,GAAG;YACd,aAAa,CAAC,MAAM,GAAG;QACzB,OAAO;YACL,cAAc,IAAI,CAAC;QACrB;QAEA,aAAa,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC;IACzD;IAEA;;GAEC,GACD,QAAO,EAAU;QACf,MAAM,gBAAgB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACzD,aAAa,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC;IACzD;IAEA;;GAEC,GACD;QACE;;QACA,OAAO,aAAa,OAAO,CAAC;IAC9B;IAEA;;GAEC,GACD,aAAY,EAAU;QACpB,aAAa,OAAO,CAAC,yBAAyB;IAChD;IAEA;;GAEC,GACD;QACE,MAAM,eAA6B;YACjC,IAAI,AAAC,QAAqB,OAAd,KAAK,GAAG,IAAG,KAA2C,OAAxC,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;YAC/D,OAAO;YACP,UAAU,EAAE;YACZ,WAAW,KAAK,GAAG;YACnB,WAAW,KAAK,GAAG;QACrB;QAEA,IAAI,CAAC,IAAI,CAAC;QACV,OAAO;IACT;IAEA;;GAEC,GACD,YAAW,cAAsB,EAAE,OAAgB;QACjD,MAAM,eAAe,IAAI,CAAC,GAAG,CAAC;QAC9B,IAAI,CAAC,cAAc;QAEnB,aAAa,QAAQ,CAAC,IAAI,CAAC;QAC3B,aAAa,SAAS,GAAG,KAAK,GAAG;QAEjC,8DAA8D;QAC9D,IAAI,aAAa,KAAK,KAAK,sBAAsB,QAAQ,IAAI,KAAK,QAAQ;YACxE,aAAa,KAAK,GAAG,QAAQ,OAAO,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC,QAAQ,OAAO,CAAC,MAAM,GAAG,KAAK,QAAQ,EAAE;QACnG;QAEA,IAAI,CAAC,IAAI,CAAC;IACZ;AACF","debugId":null}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///home/alpha/code/%40redbtn/webapp/src/components/Header.tsx"],"sourcesContent":["import { Menu, Plus } from 'lucide-react';\n\ninterface HeaderProps {\n  title: string;\n  onMenuClick: () => void;\n  onNewChat: () => void;\n}\n\nexport function Header({ title, onMenuClick, onNewChat }: HeaderProps) {\n  return (\n    <div className=\"sticky top-0 z-40 bg-[#0f0f0f] border-b border-[#2a2a2a] px-4 py-3 flex items-center gap-3\">\n      <button\n        onClick={onMenuClick}\n        className=\"lg:hidden p-2 hover:bg-[#1a1a1a] rounded-lg transition-colors text-gray-300\"\n      >\n        <Menu size={24} />\n      </button>\n      <h1 className=\"text-lg font-semibold text-gray-100\">\n        {title}\n      </h1>\n      <button\n        onClick={onNewChat}\n        className=\"ml-auto p-2 hover:bg-[#1a1a1a] rounded-lg transition-colors text-gray-300\"\n        title=\"New Chat\"\n      >\n        <Plus size={20} />\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;;;AAQO,SAAS,OAAO,KAA8C;QAA9C,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAe,GAA9C;IACrB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,SAAS;gBACT,WAAU;0BAEV,cAAA,6LAAC,6MAAI;oBAAC,MAAM;;;;;;;;;;;0BAEd,6LAAC;gBAAG,WAAU;0BACX;;;;;;0BAEH,6LAAC;gBACC,SAAS;gBACT,WAAU;gBACV,OAAM;0BAEN,cAAA,6LAAC,6MAAI;oBAAC,MAAM;;;;;;;;;;;;;;;;;AAIpB;KArBgB","debugId":null}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///home/alpha/code/%40redbtn/webapp/src/components/Sidebar.tsx"],"sourcesContent":["import { Plus, MessageSquare, Trash2, Edit2, Check, X, Terminal } from 'lucide-react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { type Conversation } from '@/lib/conversation';\n\ninterface SidebarProps {\n  isOpen: boolean;\n  conversations: Conversation[];\n  activeConversationId: string | null;\n  editingTitleId: string | null;\n  editingTitleValue: string;\n  onClose: () => void;\n  onNewChat: () => void;\n  onSwitchConversation: (id: string) => void;\n  onDeleteClick: (id: string, event: React.MouseEvent) => void;\n  onStartEditingTitle: (conv: Conversation, event: React.MouseEvent) => void;\n  onSaveEditedTitle: (conversationId: string) => void;\n  onCancelEditingTitle: () => void;\n  onEditingTitleChange: (value: string) => void;\n}\n\nexport function Sidebar({\n  isOpen,\n  conversations,\n  activeConversationId,\n  editingTitleId,\n  editingTitleValue,\n  onClose,\n  onNewChat,\n  onSwitchConversation,\n  onDeleteClick,\n  onStartEditingTitle,\n  onSaveEditedTitle,\n  onCancelEditingTitle,\n  onEditingTitleChange\n}: SidebarProps) {\n  return (\n    <>\n      {/* Sidebar */}\n      <div\n        className={`\n          fixed inset-y-0 left-0 z-50 w-64 bg-[#0f0f0f] border-r border-[#2a2a2a] text-white transform transition-transform duration-200 ease-in-out\n          lg:relative lg:translate-x-0\n          ${isOpen ? 'translate-x-0' : '-translate-x-full'}\n        `}\n      >\n        <div className=\"flex flex-col h-full\">\n          {/* Logo Header */}\n          <div className=\"p-4 border-b border-[#2a2a2a]\">\n            <Link href=\"/\" className=\"flex items-center gap-2 mb-4 no-underline hover:opacity-90\">\n              <div className=\"w-8 h-8 rounded-lg flex items-center justify-center overflow-hidden\">\n                <Image \n                  src=\"/logo.png\" \n                  alt=\"Red\" \n                  width={32} \n                  height={32}\n                  className=\"w-full h-full object-cover\"\n                />\n              </div>\n              <span className=\"text-lg font-semibold\">redbtn</span>\n            </Link>\n            <button\n              onClick={onNewChat}\n              className=\"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500 hover:bg-red-600 rounded-lg transition-colors font-medium\"\n            >\n              <Plus size={18} />\n              <span>New Chat</span>\n            </button>\n          </div>\n\n          {/* Conversations List */}\n          <div className=\"flex-1 overflow-y-auto p-3\">\n            <div className=\"space-y-1\">\n              {conversations.map(conv => (\n                <div\n                  key={conv.id}\n                  className={`\n                    relative rounded-lg transition-all group\n                    ${conv.id === activeConversationId \n                      ? 'bg-[#1a1a1a] border border-[#2a2a2a]' \n                      : 'hover:bg-[#1a1a1a] border border-transparent'\n                    }\n                  `}\n                >\n                  <button\n                    onClick={() => onSwitchConversation(conv.id)}\n                    className=\"w-full text-left px-3 py-2.5\"\n                    disabled={editingTitleId === conv.id}\n                  >\n                    <div className=\"flex items-start gap-2 pr-16\">\n                      <MessageSquare size={16} className=\"mt-0.5 flex-shrink-0 text-gray-400\" />\n                      <div className=\"flex-1 min-w-0\">\n                        {editingTitleId === conv.id ? (\n                          <div className=\"flex items-center gap-1\" onClick={(e) => e.stopPropagation()}>\n                            <input\n                              type=\"text\"\n                              value={editingTitleValue}\n                              onChange={(e) => onEditingTitleChange(e.target.value)}\n                              onKeyDown={(e) => {\n                                if (e.key === 'Enter') onSaveEditedTitle(conv.id);\n                                if (e.key === 'Escape') onCancelEditingTitle();\n                              }}\n                              className=\"flex-1 text-base font-medium bg-[#0f0f0f] border border-[#2a2a2a] rounded px-2 py-1 text-gray-200 focus:outline-none focus:border-red-500\"\n                              autoFocus\n                            />\n                            <button\n                              onClick={() => onSaveEditedTitle(conv.id)}\n                              className=\"p-1 hover:bg-[#2a2a2a] rounded text-green-400 hover:text-green-300\"\n                              title=\"Save\"\n                            >\n                              <Check size={14} />\n                            </button>\n                            <button\n                              onClick={onCancelEditingTitle}\n                              className=\"p-1 hover:bg-[#2a2a2a] rounded text-gray-400 hover:text-gray-300\"\n                              title=\"Cancel\"\n                            >\n                              <X size={14} />\n                            </button>\n                          </div>\n                        ) : (\n                          <div className=\"text-sm font-medium truncate text-gray-200\">{conv.title}</div>\n                        )}\n                        <div className=\"text-xs text-gray-500 mt-0.5\">\n                          {conv.messages.length} {conv.messages.length === 1 ? 'message' : 'messages'}\n                        </div>\n                      </div>\n                    </div>\n                  </button>\n                  \n                  {/* Action Buttons */}\n                  {editingTitleId !== conv.id && (\n                    <div className=\"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <button\n                        onClick={(e) => onStartEditingTitle(conv, e)}\n                        className=\"p-2 hover:bg-[#2a2a2a] rounded-lg text-gray-400 hover:text-blue-400\"\n                        title=\"Edit title\"\n                      >\n                        <Edit2 size={14} />\n                      </button>\n                      <button\n                        onClick={(e) => onDeleteClick(conv.id, e)}\n                        className=\"p-2 hover:bg-[#2a2a2a] rounded-lg text-gray-400 hover:text-red-400\"\n                        title=\"Delete conversation\"\n                      >\n                        <Trash2 size={14} />\n                      </button>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"p-4 border-t border-[#2a2a2a] space-y-3\">\n            {/* Logs Link */}\n            <Link\n              href=\"/logs\"\n              className=\"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-[#1a1a1a] transition-colors group\"\n            >\n              <Terminal size={16} className=\"text-gray-400 group-hover:text-[var(--red-primary)]\" />\n              <span className=\"text-sm text-gray-400 group-hover:text-[var(--foreground)]\">\n                Virtual Terminal\n              </span>\n            </Link>\n            \n            {/* Status */}\n            <div className=\"flex items-center gap-2 text-xs text-gray-500 px-3\">\n              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n              <span>Red Connected</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Overlay for mobile */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden\"\n          onClick={onClose}\n        />\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///home/alpha/code/%40redbtn/webapp/src/components/logStyles.ts"],"sourcesContent":["// Shared Tailwind class constants for log components\nexport const cardClass = 'bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] overflow-hidden';\nexport const toolbarClass = 'bg-[var(--background)]/40 border-b border-[var(--border-color)] px-4 py-3 flex items-center justify-between';\nexport const toolbarBtn = 'text-xs px-3 py-1 rounded bg-[var(--background)] text-[var(--foreground)] hover:bg-[var(--background)]/60';\nexport const toolbarActive = 'bg-[var(--red-primary)] text-white';\nexport const logLineClass = 'py-3 px-3 rounded-lg group border border-[var(--border-color)]/30 bg-[var(--background)]';\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;;;;;;;AAC9C,MAAM,YAAY;AAClB,MAAM,eAAe;AACrB,MAAM,aAAa;AACnB,MAAM,gBAAgB;AACtB,MAAM,eAAe","debugId":null}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///home/alpha/code/%40redbtn/webapp/src/components/LogViewer.tsx"],"sourcesContent":["/**\n * LogViewer - Main component for displaying logs with real-time streaming\n */\n'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { cardClass, toolbarClass, toolbarBtn, toolbarActive, logLineClass } from './logStyles';\n\n// Define LogEntry type locally to avoid importing server modules\ninterface LogEntry {\n  id: string;\n  timestamp: number;\n  level: 'debug' | 'info' | 'success' | 'warning' | 'error';\n  category: string;\n  message: string;\n  generationId?: string;\n  conversationId?: string;\n  metadata?: Record<string, unknown>;\n}\n\n// Color tag parsing functions\nfunction stripColorTags(text: string): string {\n  return text.replace(/<\\/?(?:red|green|yellow|blue|magenta|cyan|white|black|gray|dim|bold|underline|blink|reverse|hidden)>/gi, '');\n}\n\nfunction parseColorTagsToHtml(text: string): string {\n  const colorMap: Record<string, string> = {\n    red: 'text-red-400',\n    green: 'text-green-400',\n    yellow: 'text-yellow-400',\n    blue: 'text-blue-400',\n    magenta: 'text-magenta-400',\n    cyan: 'text-cyan-400',\n    white: 'text-white',\n    gray: 'text-gray-400',\n    dim: 'text-gray-500',\n    bold: 'font-bold',\n  };\n  \n  let html = text;\n  \n  // Replace opening tags\n  Object.entries(colorMap).forEach(([color, className]) => {\n    const regex = new RegExp(`<${color}>`, 'gi');\n    html = html.replace(regex, `<span class=\"${className}\">`);\n  });\n  \n  // Replace closing tags\n  html = html.replace(/<\\/(?:red|green|yellow|blue|magenta|cyan|white|black|gray|dim|bold|underline|blink|reverse|hidden)>/gi, '</span>');\n  \n  return html;\n}\n\ninterface LogViewerProps {\n  conversationId: string;\n  generationId: string;\n  filterLevel: string;\n  filterCategory: string;\n  showThoughts: boolean;\n  onStreamingChange: (isStreaming: boolean) => void;\n}\n\n// Type guard for payloads returned by the logs API\nfunction isLogPayload(obj: unknown): obj is { logs: LogEntry[] } {\n  if (!obj || typeof obj !== 'object') return false;\n  const o = obj as Record<string, unknown>;\n  if (!Object.prototype.hasOwnProperty.call(o, 'logs')) return false;\n  const logsValue = o['logs'] as unknown;\n  return Array.isArray(logsValue);\n}\n\nexport function LogViewer({\n  conversationId,\n  generationId,\n  filterLevel,\n  filterCategory,\n  showThoughts,\n  onStreamingChange,\n}: LogViewerProps) {\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [autoScroll, setAutoScroll] = useState(true);\n  const [compact, setCompact] = useState(false);\n  const logsEndRef = useRef<HTMLDivElement>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // Stream logs (declare early so effects can reference it)\n  const startStreaming = useCallback(async () => {\n    onStreamingChange(true);\n\n    try {\n      const streamUrl = generationId\n        ? `/api/v1/generations/${generationId}/stream`\n        : `/api/v1/conversations/${conversationId}/stream`;\n\n      const response = await fetch(streamUrl);\n      if (!response.ok) throw new Error('Failed to stream logs');\n\n      const reader = response.body?.getReader();\n      if (!reader) throw new Error('Stream not available');\n\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            try {\n              const parsed = JSON.parse(line.slice(6));\n              if (parsed && typeof parsed === 'object' && 'id' in parsed && 'timestamp' in parsed) {\n                setLogs((prev) => [...prev, parsed as LogEntry]);\n              }\n            } catch (e) {\n              console.error('Failed to parse log:', e);\n            }\n          } else if (line.startsWith('event: complete')) {\n            onStreamingChange(false);\n            return;\n          }\n        }\n      }\n    } catch (err: unknown) {\n      console.error('Streaming error:', err instanceof Error ? err.message : String(err));\n      onStreamingChange(false);\n    }\n  }, [conversationId, generationId, onStreamingChange]);\n\n  // Auto-scroll to bottom when new logs arrive\n  useEffect(() => {\n    if (autoScroll && logsEndRef.current) {\n      logsEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [logs, autoScroll]);\n\n  // Fetch logs\n  useEffect(() => {\n    if (!conversationId && !generationId) {\n      setLogs([]);\n      return;\n    }\n\n    // Cancel previous request\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n\n    abortControllerRef.current = new AbortController();\n    \n    const fetchLogs = async () => {\n      setIsLoading(true);\n      setError(null);\n      onStreamingChange(false);\n\n      try {\n        let shouldStream = false;\n\n        if (generationId) {\n          // Fetch specific generation\n          const response = await fetch(`/api/v1/generations/${generationId}/logs`, {\n            signal: abortControllerRef.current?.signal,\n          });\n          \n          if (!response.ok) throw new Error('Failed to fetch logs');\n          \n          const data = await response.json() as unknown;\n          if (isLogPayload(data)) {\n            setLogs(data.logs as LogEntry[]);\n          }\n          \n          // Check if generation is still active - if so, stream it\n          const genResponse = await fetch(`/api/v1/generations/${generationId}`);\n          const generation = await genResponse.json() as unknown;\n          const gen = generation as Record<string, unknown>;\n          if (gen && typeof gen.status === 'string') {\n            shouldStream = gen.status === 'generating';\n          }\n          \n        } else if (conversationId) {\n          // Fetch conversation logs\n          const response = await fetch(`/api/v1/conversations/${conversationId}/logs`, {\n            signal: abortControllerRef.current?.signal,\n          });\n          \n          if (!response.ok) throw new Error('Failed to fetch logs');\n          \n          const data = await response.json() as unknown;\n          if (isLogPayload(data)) {\n            setLogs(data.logs as LogEntry[]);\n          }\n          \n          // Check if any generation is active\n          const stateResponse = await fetch(`/api/v1/conversations/${conversationId}/generation-state`);\n          const state = await stateResponse.json() as unknown;\n          const st = state as Record<string, unknown>;\n          if (st && typeof st.isGenerating === 'boolean') {\n            shouldStream = st.isGenerating as boolean;\n          }\n        }\n\n        setIsLoading(false);\n\n        // Start streaming if generation is active\n        if (shouldStream) {\n          startStreaming();\n        }\n      } catch (err: unknown) {\n        // Normalize error and ignore AbortError\n        const eObj = err as Record<string, unknown> | null;\n        const isAbort = eObj && typeof eObj.name === 'string' && eObj.name === 'AbortError';\n        const message = isAbort ? null : (err instanceof Error ? err.message : String(err));\n\n        if (message) {\n          setError(message);\n          setIsLoading(false);\n        }\n      }\n    };\n\n    fetchLogs();\n\n    return () => {\n      abortControllerRef.current?.abort();\n    };\n  }, [conversationId, generationId, startStreaming, onStreamingChange]);\n\n  // Stream logs (already declared above)\n\n  // Filter logs\n  const filteredLogs = logs.filter((log) => {\n    if (filterLevel !== 'all' && log.level !== filterLevel) return false;\n    if (filterCategory !== 'all' && log.category !== filterCategory) return false;\n    if (!showThoughts && log.category === 'thought') return false;\n    return true;\n  });\n\n  // Render empty state\n  if (!conversationId && !generationId) {\n    return (\n      <div className=\"bg-gray-900 rounded-lg border border-gray-800 p-12 text-center\">\n        <div className=\"text-6xl mb-4\">üìù</div>\n        <h2 className=\"text-xl font-semibold text-gray-300 mb-2\">\n          No logs selected\n        </h2>\n        <p className=\"text-gray-500\">\n          Enter a conversation ID or generation ID to view logs\n        </p>\n      </div>\n    );\n  }\n\n  // Render loading state\n  if (isLoading) {\n    return (\n      <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-12 text-center\">\n        <div className=\"inline-block w-8 h-8 border-4 border-[var(--background)] border-t-[var(--red-primary)] rounded-full animate-spin mb-4\"></div>\n        <p className=\"text-[var(--foreground)] opacity-60\">Loading logs...</p>\n      </div>\n    );\n  }\n\n  // Render error state\n  if (error) {\n    return (\n      <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"text-2xl\">‚ùå</div>\n          <div>\n            <h3 className=\"font-semibold text-[var(--red-primary)] mb-1\">Error loading logs</h3>\n            <p className=\"text-[var(--foreground)] opacity-60 text-sm\">{error}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n  <div className={cardClass}>\n      {/* Toolbar */}\n      <div className={toolbarClass}>\n        <div className=\"text-sm text-[var(--foreground)] opacity-70\">\n          <span className=\"font-medium\">{filteredLogs.length}</span> {filteredLogs.length === 1 ? 'log' : 'logs'}\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setAutoScroll(!autoScroll)}\n            className={`${toolbarBtn} ${autoScroll ? toolbarActive : ''}`}\n            title={autoScroll ? 'Disable auto-scroll' : 'Enable auto-scroll'}\n          >\n            {autoScroll ? 'üìå Auto' : 'üìå'}\n          </button>\n          <button\n            onClick={() => setCompact(!compact)}\n            className={`${toolbarBtn} ${compact ? toolbarActive : ''}`}\n            title={compact ? 'Disable compact view' : 'Enable compact view'}\n          >\n            {compact ? 'ÔøΩ Compact' : 'ÔøΩ'}\n          </button>\n          <button\n            onClick={() => setLogs([])}\n            className={toolbarBtn}\n            title=\"Clear logs\"\n          >\n            üóëÔ∏è\n          </button>\n          <button\n            onClick={() => {\n              const text = filteredLogs\n                .map((log) => `[${new Date(log.timestamp).toISOString()}] [${log.level}] ${stripColorTags(log.message)}`)\n                .join('\\n');\n              navigator.clipboard.writeText(text);\n            }}\n            className={toolbarBtn}\n            title=\"Copy logs\"\n          >\n            üìã\n          </button>\n        </div>\n      </div>\n\n      {/* Logs */}\n      <div className=\"p-4 max-h-[70vh] overflow-y-auto font-sans text-sm\">\n        {filteredLogs.length === 0 ? (\n          <div className=\"text-center py-12 text-[var(--foreground)] opacity-60\">\n            No logs match the current filters\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {filteredLogs.map((log) => (\n              <LogLine key={log.id} log={log} compact={compact} />\n            ))}\n            <div ref={logsEndRef} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Individual log line component\nfunction LogLine({ log, compact }: { log: LogEntry; compact?: boolean }) {\n  const levelColors: Record<string, string> = {\n    debug: 'text-gray-500',\n    info: 'text-blue-400',\n    success: 'text-green-400',\n    warning: 'text-yellow-400',\n    error: 'text-red-400',\n  };\n\n  const levelIcons: Record<string, string> = {\n    debug: 'üêõ',\n    info: '‚ÑπÔ∏è',\n    success: '‚úÖ',\n    warning: '‚ö†Ô∏è',\n    error: '‚ùå',\n  };\n\n  const timestamp = new Date(log.timestamp).toLocaleTimeString('en-US', {\n    hour12: false,\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    fractionalSecondDigits: 3,\n  });\n\n  // Parse color tags to HTML\n  const messageHtml = parseColorTagsToHtml(log.message);\n  const [expanded, setExpanded] = useState(false);\n\n  return (\n    <div className={`${logLineClass} ${compact ? 'py-2 px-2' : 'py-3 px-3'}`}>\n      {/* Metadata line */}\n      <div className={`flex items-center gap-3 ${compact ? 'mb-1' : 'mb-2'} flex-wrap`}>\n        <span className=\"text-[var(--foreground)]/70 text-xs tabular-nums shrink-0\">{timestamp}</span>\n        <span className=\"shrink-0\" title={log.level}>{levelIcons[log.level] || '‚Ä¢'}</span>\n        <span className={`shrink-0 text-xs uppercase font-semibold ${levelColors[log.level]}`}>{log.level}</span>\n        <span className=\"shrink-0 text-xs text-[var(--foreground)]/60 uppercase\">{log.category}</span>\n\n        {/* Expand / collapse */}\n        <button\n          onClick={() => setExpanded((s) => !s)}\n          className=\"ml-auto text-xs px-2 py-1 rounded bg-[var(--background)] text-[var(--foreground)] hover:bg-[var(--background)]/60\"\n          title={expanded ? 'Collapse' : 'Expand'}\n        >\n          {expanded ? '‚ñæ' : '‚ñ∏'}\n        </button>\n      </div>\n\n      {/* Message line */}\n      {(!compact || expanded) && (\n        <div className=\"pl-2 break-words text-sm leading-relaxed font-mono text-[var(--foreground)]/90\">\n          <div dangerouslySetInnerHTML={{ __html: messageHtml }} />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1131, "column": 0}, "map": {"version":3,"sources":["file:///home/alpha/code/%40redbtn/webapp/src/components/LogFilters.tsx"],"sourcesContent":["/**\n * LogFilters - Sidebar filters for log viewer\n */\n'use client';\n\ninterface LogFiltersProps {\n  conversationId: string;\n  setConversationId: (id: string) => void;\n  generationId: string;\n  setGenerationId: (id: string) => void;\n  filterLevel: string;\n  setFilterLevel: (level: string) => void;\n  filterCategory: string;\n  setFilterCategory: (category: string) => void;\n  showThoughts: boolean;\n  setShowThoughts: (show: boolean) => void;\n}\n\nexport function LogFilters({\n  conversationId,\n  setConversationId,\n  generationId,\n  setGenerationId,\n  filterLevel,\n  setFilterLevel,\n  filterCategory,\n  setFilterCategory,\n  showThoughts,\n  setShowThoughts,\n}: LogFiltersProps) {\n  return (\n    <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-4 space-y-4\">\n      <h2 className=\"text-lg font-semibold text-[var(--foreground)] mb-4\">Filters</h2>\n\n      {/* Conversation ID */}\n      <div>\n        <label className=\"block text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">\n          Conversation ID\n        </label>\n        <input\n          type=\"text\"\n          value={conversationId}\n          onChange={(e) => {\n            setConversationId(e.target.value);\n            setGenerationId(''); // Clear generation when conversation changes\n          }}\n          placeholder=\"conv_...\"\n          className=\"w-full px-3 py-2 bg-[var(--background)] border border-[var(--border-color)] rounded text-sm text-[var(--foreground)] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--red-primary)]\"\n        />\n      </div>\n\n      {/* Generation ID */}\n      <div>\n        <label className=\"block text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">\n          Generation ID\n        </label>\n        <input\n          type=\"text\"\n          value={generationId}\n          onChange={(e) => {\n            setGenerationId(e.target.value);\n            setConversationId(''); // Clear conversation when generation is set\n          }}\n          placeholder=\"gen_...\"\n          className=\"w-full px-3 py-2 bg-[var(--background)] border border-[var(--border-color)] rounded text-sm text-[var(--foreground)] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--red-primary)]\"\n        />\n      </div>\n\n      <div className=\"border-t border-[var(--border-color)] pt-4\"></div>\n\n      {/* Level Filter */}\n      <div>\n        <label className=\"block text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">\n          Log Level\n        </label>\n        <select\n          value={filterLevel}\n          onChange={(e) => setFilterLevel(e.target.value)}\n          className=\"w-full px-3 py-2 bg-[var(--background)] border border-[var(--border-color)] rounded text-sm text-[var(--foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--red-primary)]\"\n        >\n          <option value=\"all\">All Levels</option>\n          <option value=\"debug\">üêõ Debug</option>\n          <option value=\"info\">‚ÑπÔ∏è Info</option>\n          <option value=\"success\">‚úÖ Success</option>\n          <option value=\"warning\">‚ö†Ô∏è Warning</option>\n          <option value=\"error\">‚ùå Error</option>\n        </select>\n      </div>\n\n      {/* Category Filter */}\n      <div>\n        <label className=\"block text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">\n          Category\n        </label>\n        <select\n          value={filterCategory}\n          onChange={(e) => setFilterCategory(e.target.value)}\n          className=\"w-full px-3 py-2 bg-[var(--background)] border border-[var(--border-color)] rounded text-sm text-[var(--foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--red-primary)]\"\n        >\n          <option value=\"all\">All Categories</option>\n          <option value=\"generation\">üîÑ Generation</option>\n          <option value=\"router\">üß≠ Router</option>\n          <option value=\"tool\">üîß Tool</option>\n          <option value=\"chat\">üí¨ Chat</option>\n          <option value=\"thought\">üí≠ Thought</option>\n        </select>\n      </div>\n\n      {/* Show Thoughts Toggle */}\n      <div>\n        <label className=\"flex items-center gap-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showThoughts}\n            onChange={(e) => setShowThoughts(e.target.checked)}\n            className=\"w-4 h-4 rounded border-[var(--border-color)] bg-[var(--background)] text-[var(--red-primary)] focus:ring-2 focus:ring-[var(--red-primary)]\"\n          />\n          <span className=\"text-sm text-[var(--foreground)] opacity-70\">\n            üí≠ Show Thoughts\n          </span>\n        </label>\n        <p className=\"text-xs text-[var(--foreground)] opacity-50 mt-1 ml-6\">\n          Internal reasoning from AI nodes\n        </p>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"border-t border-[var(--border-color)] pt-4 space-y-2\">\n        <button\n          onClick={() => {\n            setFilterLevel('all');\n            setFilterCategory('all');\n            setShowThoughts(true);\n          }}\n          className=\"w-full px-3 py-2 bg-[var(--background)] hover:bg-[var(--sidebar-bg)] text-sm text-[var(--foreground)] opacity-70 hover:opacity-100 rounded transition-all\"\n        >\n          Reset Filters\n        </button>\n        <button\n          onClick={() => {\n            setConversationId('');\n            setGenerationId('');\n          }}\n          className=\"w-full px-3 py-2 bg-[var(--background)] hover:bg-[var(--sidebar-bg)] text-sm text-[var(--foreground)] opacity-70 hover:opacity-100 rounded transition-all\"\n        >\n          Clear IDs\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;AACD;;AAeO,SAAS,WAAW,KAWT;QAXS,EACzB,cAAc,EACd,iBAAiB,EACjB,YAAY,EACZ,eAAe,EACf,WAAW,EACX,cAAc,EACd,cAAc,EACd,iBAAiB,EACjB,YAAY,EACZ,eAAe,EACC,GAXS;IAYzB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAsD;;;;;;0BAGpE,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAAqE;;;;;;kCAGtF,6LAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC;4BACT,kBAAkB,EAAE,MAAM,CAAC,KAAK;4BAChC,gBAAgB,KAAK,6CAA6C;wBACpE;wBACA,aAAY;wBACZ,WAAU;;;;;;;;;;;;0BAKd,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAAqE;;;;;;kCAGtF,6LAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC;4BACT,gBAAgB,EAAE,MAAM,CAAC,KAAK;4BAC9B,kBAAkB,KAAK,4CAA4C;wBACrE;wBACA,aAAY;wBACZ,WAAU;;;;;;;;;;;;0BAId,6LAAC;gBAAI,WAAU;;;;;;0BAGf,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAAqE;;;;;;kCAGtF,6LAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,WAAU;;0CAEV,6LAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,6LAAC;gCAAO,OAAM;0CAAQ;;;;;;0CACtB,6LAAC;gCAAO,OAAM;0CAAO;;;;;;0CACrB,6LAAC;gCAAO,OAAM;0CAAU;;;;;;0CACxB,6LAAC;gCAAO,OAAM;0CAAU;;;;;;0CACxB,6LAAC;gCAAO,OAAM;0CAAQ;;;;;;;;;;;;;;;;;;0BAK1B,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAAqE;;;;;;kCAGtF,6LAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;wBACjD,WAAU;;0CAEV,6LAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,6LAAC;gCAAO,OAAM;0CAAa;;;;;;0CAC3B,6LAAC;gCAAO,OAAM;0CAAS;;;;;;0CACvB,6LAAC;gCAAO,OAAM;0CAAO;;;;;;0CACrB,6LAAC;gCAAO,OAAM;0CAAO;;;;;;0CACrB,6LAAC;gCAAO,OAAM;0CAAU;;;;;;;;;;;;;;;;;;0BAK5B,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;gCACC,MAAK;gCACL,SAAS;gCACT,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,OAAO;gCACjD,WAAU;;;;;;0CAEZ,6LAAC;gCAAK,WAAU;0CAA8C;;;;;;;;;;;;kCAIhE,6LAAC;wBAAE,WAAU;kCAAwD;;;;;;;;;;;;0BAMvE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS;4BACP,eAAe;4BACf,kBAAkB;4BAClB,gBAAgB;wBAClB;wBACA,WAAU;kCACX;;;;;;kCAGD,6LAAC;wBACC,SAAS;4BACP,kBAAkB;4BAClB,gBAAgB;wBAClB;wBACA,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;KApIgB","debugId":null}},
    {"offset": {"line": 1464, "column": 0}, "map": {"version":3,"sources":["file:///home/alpha/code/%40redbtn/webapp/src/components/LogStats.tsx"],"sourcesContent":["/**\n * LogStats - Display statistics for a conversation\n */\n'use client';\n\nimport { useState, useEffect } from 'react';\n\ninterface LogStatsProps {\n  conversationId: string;\n}\n\ninterface Stats {\n  totalLogs: number;\n  generationCount: number;\n  isGenerating: boolean;\n  byLevel: Record<string, number>;\n  byCategory: Record<string, number>;\n}\n\nexport function LogStats({ conversationId }: LogStatsProps) {\n  const [stats, setStats] = useState<Stats | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (!conversationId) {\n      setStats(null);\n      return;\n    }\n\n    const fetchStats = async () => {\n      setIsLoading(true);\n      try {\n        const response = await fetch(`/api/v1/logs/stats?conversationId=${conversationId}`);\n        if (response.ok) {\n          const data = await response.json();\n          setStats(data);\n        }\n      } catch (err) {\n        console.error('Failed to fetch stats:', err);\n      }\n      setIsLoading(false);\n    };\n\n    fetchStats();\n    \n    // Refresh stats every 5 seconds if generating\n    const interval = setInterval(() => {\n      // Only refresh periodically while generating\n      if (stats?.isGenerating) {\n        fetchStats();\n      }\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [conversationId, stats?.isGenerating]);\n\n  if (!conversationId) return null;\n\n  if (isLoading && !stats) {\n    return (\n      <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-4\">\n        <div className=\"animate-pulse space-y-3\">\n          <div className=\"h-4 bg-[var(--background)] rounded w-3/4\"></div>\n          <div className=\"h-4 bg-[var(--background)] rounded w-1/2\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!stats) return null;\n\n  return (\n    <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-4 space-y-4\">\n      <h2 className=\"text-lg font-semibold text-[var(--foreground)] mb-4\">Statistics</h2>\n\n      {/* Overview */}\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-[var(--foreground)] opacity-60\">Total Logs</span>\n          <span className=\"text-[var(--foreground)] font-semibold\">{stats.totalLogs}</span>\n        </div>\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-[var(--foreground)] opacity-60\">Generations</span>\n          <span className=\"text-[var(--foreground)] font-semibold\">{stats.generationCount}</span>\n        </div>\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-[var(--foreground)] opacity-60\">Status</span>\n          <span className={stats.isGenerating ? 'text-[var(--red-primary)]' : 'text-[var(--foreground)] opacity-40'}>\n            {stats.isGenerating ? 'üü¢ Active' : '‚ö™ Idle'}\n          </span>\n        </div>\n      </div>\n\n      {/* By Level */}\n      <div className=\"border-t border-[var(--border-color)] pt-4\">\n        <h3 className=\"text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">By Level</h3>\n        <div className=\"space-y-2\">\n          {Object.entries(stats.byLevel).map(([level, count]) => {\n            const icons: Record<string, string> = {\n              debug: 'üêõ',\n              info: '‚ÑπÔ∏è',\n              success: '‚úÖ',\n              warning: '‚ö†Ô∏è',\n              error: '‚ùå',\n            };\n            const colors: Record<string, string> = {\n              debug: 'text-gray-500',\n              info: 'text-blue-400',\n              success: 'text-green-400',\n              warning: 'text-yellow-400',\n              error: 'text-red-400',\n            };\n            \n            const percentage = stats.totalLogs > 0 ? (count / stats.totalLogs) * 100 : 0;\n            \n            return (\n              <div key={level}>\n                <div className=\"flex justify-between text-xs mb-1\">\n                  <span className={colors[level]}>\n                    {icons[level]} {level}\n                  </span>\n                  <span className=\"text-[var(--foreground)] opacity-60\">{count}</span>\n                </div>\n                <div className=\"w-full bg-[var(--background)] rounded-full h-1.5\">\n                  <div\n                    className={`h-1.5 rounded-full ${colors[level].replace('text-', 'bg-')}`}\n                    style={{ width: `${percentage}%` }}\n                  ></div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* By Category */}\n      <div className=\"border-t border-[var(--border-color)] pt-4\">\n        <h3 className=\"text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">By Category</h3>\n        <div className=\"space-y-2\">\n          {Object.entries(stats.byCategory).map(([category, count]) => {\n            const icons: Record<string, string> = {\n              generation: 'üîÑ',\n              router: 'üß≠',\n              tool: 'üîß',\n              chat: 'üí¨',\n              thought: 'üí≠',\n            };\n            \n            const percentage = stats.totalLogs > 0 ? (count / stats.totalLogs) * 100 : 0;\n            \n            return (\n              <div key={category} className=\"space-y-1\">\n                <div className=\"flex justify-between text-xs\">\n                  <span className=\"text-[var(--foreground)] opacity-60\">\n                    {icons[category]} {category}\n                  </span>\n                  <span className=\"text-[var(--foreground)] font-medium\">{count}</span>\n                </div>\n                <div className=\"w-full bg-[var(--background)] rounded-full h-1.5\">\n                  <div\n                    className={`h-1.5 rounded-full bg-[var(--red-primary)]`}\n                    style={{ width: `${percentage}%` }}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1853, "column": 0}, "map": {"version":3,"sources":["file:///home/alpha/code/%40redbtn/webapp/src/app/logs/page.tsx"],"sourcesContent":["/**\n * Logs Page - Virtual Terminal for Red AI\n * View real-time logs with filtering and statistics\n */\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { conversationStorage, Conversation } from '@/lib/conversation';\nimport { Header } from '@/components/Header';\nimport { Sidebar } from '@/components/Sidebar';\nimport { LogViewer } from '@/components/LogViewer';\nimport { LogFilters } from '@/components/LogFilters';\nimport { LogStats } from '@/components/LogStats';\n\nexport default function LogsPage() {\n  const [conversationId, setConversationId] = useState('');\n  const [generationId, setGenerationId] = useState('');\n  const [filterLevel, setFilterLevel] = useState('all');\n  const [filterCategory, setFilterCategory] = useState('all');\n  const [showThoughts, setShowThoughts] = useState(true);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [activeConversationId, setActiveConversationId] = useState<string | null>(null);\n\n  // Load conversations on mount\n  useEffect(() => {\n    const stored = conversationStorage.getAll();\n    setConversations(stored);\n    \n    const activeId = conversationStorage.getActiveId();\n    if (activeId && stored.some(c => c.id === activeId)) {\n      setActiveConversationId(activeId);\n      setConversationId(activeId);\n    }\n  }, []);\n\n  const createNewConversation = () => {\n    const newConv = conversationStorage.create();\n    setConversations(prev => [newConv, ...prev]);\n    setActiveConversationId(newConv.id);\n    conversationStorage.setActiveId(newConv.id);\n    setConversationId(newConv.id);\n    setIsSidebarOpen(false);\n  };\n\n  const switchConversation = (id: string) => {\n    setActiveConversationId(id);\n    conversationStorage.setActiveId(id);\n    setConversationId(id);\n    setGenerationId(''); // Clear generation when switching conversations\n    setIsSidebarOpen(false);\n  };\n\n  const handleDeleteClick = () => {\n    // Not implemented for logs page\n  };\n\n  return (\n    <div className=\"flex bg-[var(--background)]\" style={{ height: 'calc(var(--vh, 1vh) * 100)' }}>\n      {/* Sidebar */}\n      <Sidebar\n        isOpen={isSidebarOpen}\n        conversations={conversations}\n        activeConversationId={activeConversationId}\n        editingTitleId={null}\n        editingTitleValue=\"\"\n        onClose={() => setIsSidebarOpen(false)}\n        onNewChat={createNewConversation}\n        onSwitchConversation={switchConversation}\n        onDeleteClick={handleDeleteClick}\n        onStartEditingTitle={() => {}}\n        onSaveEditedTitle={() => {}}\n        onCancelEditingTitle={() => {}}\n        onEditingTitleChange={() => {}}\n      />\n\n      {/* Main content */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <Header\n          title=\"üìù Virtual Terminal\"\n          onMenuClick={() => setIsSidebarOpen(!isSidebarOpen)}\n          onNewChat={createNewConversation}\n        />\n\n        {/* Logs Content */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {/* Status Bar */}\n          <div className=\"mb-6 flex items-center justify-between\">\n            <div>\n              <p className=\"text-[var(--foreground)] text-sm opacity-70\">\n                Real-time logs from Red AI generations\n              </p>\n            </div>\n            {isStreaming && (\n              <div className=\"flex items-center gap-2 px-4 py-2 bg-[var(--red-primary)]/10 border border-[var(--red-primary)]/30 rounded-lg\">\n                <div className=\"w-2 h-2 bg-[var(--red-primary)] rounded-full animate-pulse\"></div>\n                <span className=\"text-[var(--red-primary)] text-sm font-medium\">LIVE</span>\n              </div>\n            )}\n          </div>\n\n          {/* Main Layout */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n            {/* Filters & Stats Sidebar */}\n            <div className=\"lg:col-span-1 space-y-6\">\n              <LogFilters\n                conversationId={conversationId}\n                setConversationId={setConversationId}\n                generationId={generationId}\n                setGenerationId={setGenerationId}\n                filterLevel={filterLevel}\n                setFilterLevel={setFilterLevel}\n                filterCategory={filterCategory}\n                setFilterCategory={setFilterCategory}\n                showThoughts={showThoughts}\n                setShowThoughts={setShowThoughts}\n              />\n              <LogStats conversationId={conversationId} />\n            </div>\n\n            {/* Main Log Viewer */}\n            <div className=\"lg:col-span-3\">\n              <LogViewer\n                conversationId={conversationId}\n                generationId={generationId}\n                filterLevel={filterLevel}\n                filterCategory={filterCategory}\n                showThoughts={showThoughts}\n                onStreamingChange={setIsStreaming}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}