{"version":3,"sources":["turbopack:///[project]/src/app/logs/page.tsx","turbopack:///[project]/src/components/logStyles.ts","turbopack:///[project]/src/components/LogViewer.tsx","turbopack:///[project]/src/components/LogFilters.tsx","turbopack:///[project]/src/components/LogStats.tsx"],"sourcesContent":["/**\n * Logs Page - Virtual Terminal for Red AI\n * View real-time logs with filtering and statistics\n */\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { conversationStorage, Conversation } from '@/lib/conversation';\nimport { Header } from '@/components/Header';\nimport { Sidebar } from '@/components/Sidebar';\nimport { LogViewer } from '@/components/LogViewer';\nimport { LogFilters } from '@/components/LogFilters';\nimport { LogStats } from '@/components/LogStats';\n\nexport default function LogsPage() {\n  const [conversationId, setConversationId] = useState('');\n  const [generationId, setGenerationId] = useState('');\n  const [filterLevel, setFilterLevel] = useState('all');\n  const [filterCategory, setFilterCategory] = useState('all');\n  const [showThoughts, setShowThoughts] = useState(true);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [activeConversationId, setActiveConversationId] = useState<string | null>(null);\n\n  // Load conversations on mount\n  useEffect(() => {\n    const stored = conversationStorage.getAll();\n    setConversations(stored);\n    \n    const activeId = conversationStorage.getActiveId();\n    if (activeId && stored.some(c => c.id === activeId)) {\n      setActiveConversationId(activeId);\n      setConversationId(activeId);\n    }\n  }, []);\n\n  const createNewConversation = () => {\n    const newConv = conversationStorage.create();\n    setConversations(prev => [newConv, ...prev]);\n    setActiveConversationId(newConv.id);\n    conversationStorage.setActiveId(newConv.id);\n    setConversationId(newConv.id);\n    setIsSidebarOpen(false);\n  };\n\n  const switchConversation = (id: string) => {\n    setActiveConversationId(id);\n    conversationStorage.setActiveId(id);\n    setConversationId(id);\n    setGenerationId(''); // Clear generation when switching conversations\n    setIsSidebarOpen(false);\n  };\n\n  const handleDeleteClick = () => {\n    // Not implemented for logs page\n  };\n\n  return (\n    <div className=\"flex bg-[var(--background)]\" style={{ height: 'calc(var(--vh, 1vh) * 100)' }}>\n      {/* Sidebar */}\n      <Sidebar\n        isOpen={isSidebarOpen}\n        conversations={conversations}\n        activeConversationId={activeConversationId}\n        editingTitleId={null}\n        editingTitleValue=\"\"\n        onClose={() => setIsSidebarOpen(false)}\n        onNewChat={createNewConversation}\n        onSwitchConversation={switchConversation}\n        onDeleteClick={handleDeleteClick}\n        onStartEditingTitle={() => {}}\n        onSaveEditedTitle={() => {}}\n        onCancelEditingTitle={() => {}}\n        onEditingTitleChange={() => {}}\n      />\n\n      {/* Main content */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <Header\n          title=\"üìù Virtual Terminal\"\n          onMenuClick={() => setIsSidebarOpen(!isSidebarOpen)}\n          onNewChat={createNewConversation}\n        />\n\n        {/* Logs Content */}\n        <div className=\"flex-1 overflow-y-auto p-6\">\n          {/* Status Bar */}\n          <div className=\"mb-6 flex items-center justify-between\">\n            <div>\n              <p className=\"text-[var(--foreground)] text-sm opacity-70\">\n                Real-time logs from Red AI generations\n              </p>\n            </div>\n            {isStreaming && (\n              <div className=\"flex items-center gap-2 px-4 py-2 bg-[var(--red-primary)]/10 border border-[var(--red-primary)]/30 rounded-lg\">\n                <div className=\"w-2 h-2 bg-[var(--red-primary)] rounded-full animate-pulse\"></div>\n                <span className=\"text-[var(--red-primary)] text-sm font-medium\">LIVE</span>\n              </div>\n            )}\n          </div>\n\n          {/* Main Layout */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n            {/* Filters & Stats Sidebar */}\n            <div className=\"lg:col-span-1 space-y-6\">\n              <LogFilters\n                conversationId={conversationId}\n                setConversationId={setConversationId}\n                generationId={generationId}\n                setGenerationId={setGenerationId}\n                filterLevel={filterLevel}\n                setFilterLevel={setFilterLevel}\n                filterCategory={filterCategory}\n                setFilterCategory={setFilterCategory}\n                showThoughts={showThoughts}\n                setShowThoughts={setShowThoughts}\n              />\n              <LogStats conversationId={conversationId} />\n            </div>\n\n            {/* Main Log Viewer */}\n            <div className=\"lg:col-span-3\">\n              <LogViewer\n                conversationId={conversationId}\n                generationId={generationId}\n                filterLevel={filterLevel}\n                filterCategory={filterCategory}\n                showThoughts={showThoughts}\n                onStreamingChange={setIsStreaming}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// Shared Tailwind class constants for log components\nexport const cardClass = 'bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] overflow-hidden';\nexport const toolbarClass = 'bg-[var(--background)]/40 border-b border-[var(--border-color)] px-4 py-3 flex items-center justify-between';\nexport const toolbarBtn = 'text-xs px-3 py-1 rounded bg-[var(--background)] text-[var(--foreground)] hover:bg-[var(--background)]/60';\nexport const toolbarActive = 'bg-[var(--red-primary)] text-white';\nexport const logLineClass = 'py-3 px-3 rounded-lg group border border-[var(--border-color)]/30 bg-[var(--background)]';\n","/**\n * LogViewer - Main component for displaying logs with real-time streaming\n */\n'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { cardClass, toolbarClass, toolbarBtn, toolbarActive, logLineClass } from './logStyles';\n\n// Define LogEntry type locally to avoid importing server modules\ninterface LogEntry {\n  id: string;\n  timestamp: number;\n  level: 'debug' | 'info' | 'success' | 'warning' | 'error';\n  category: string;\n  message: string;\n  generationId?: string;\n  conversationId?: string;\n  metadata?: Record<string, unknown>;\n}\n\n// Color tag parsing functions\nfunction stripColorTags(text: string): string {\n  return text.replace(/<\\/?(?:red|green|yellow|blue|magenta|cyan|white|black|gray|dim|bold|underline|blink|reverse|hidden)>/gi, '');\n}\n\nfunction parseColorTagsToHtml(text: string): string {\n  const colorMap: Record<string, string> = {\n    red: 'text-red-400',\n    green: 'text-green-400',\n    yellow: 'text-yellow-400',\n    blue: 'text-blue-400',\n    magenta: 'text-magenta-400',\n    cyan: 'text-cyan-400',\n    white: 'text-white',\n    gray: 'text-gray-400',\n    dim: 'text-gray-500',\n    bold: 'font-bold',\n  };\n  \n  let html = text;\n  \n  // Replace opening tags\n  Object.entries(colorMap).forEach(([color, className]) => {\n    const regex = new RegExp(`<${color}>`, 'gi');\n    html = html.replace(regex, `<span class=\"${className}\">`);\n  });\n  \n  // Replace closing tags\n  html = html.replace(/<\\/(?:red|green|yellow|blue|magenta|cyan|white|black|gray|dim|bold|underline|blink|reverse|hidden)>/gi, '</span>');\n  \n  return html;\n}\n\ninterface LogViewerProps {\n  conversationId: string;\n  generationId: string;\n  filterLevel: string;\n  filterCategory: string;\n  showThoughts: boolean;\n  onStreamingChange: (isStreaming: boolean) => void;\n}\n\n// Type guard for payloads returned by the logs API\nfunction isLogPayload(obj: unknown): obj is { logs: LogEntry[] } {\n  if (!obj || typeof obj !== 'object') return false;\n  const o = obj as Record<string, unknown>;\n  if (!Object.prototype.hasOwnProperty.call(o, 'logs')) return false;\n  const logsValue = o['logs'] as unknown;\n  return Array.isArray(logsValue);\n}\n\nexport function LogViewer({\n  conversationId,\n  generationId,\n  filterLevel,\n  filterCategory,\n  showThoughts,\n  onStreamingChange,\n}: LogViewerProps) {\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [autoScroll, setAutoScroll] = useState(true);\n  const [compact, setCompact] = useState(false);\n  const logsEndRef = useRef<HTMLDivElement>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // Stream logs (declare early so effects can reference it)\n  const startStreaming = useCallback(async () => {\n    onStreamingChange(true);\n\n    try {\n      const streamUrl = generationId\n        ? `/api/v1/generations/${generationId}/stream`\n        : `/api/v1/conversations/${conversationId}/stream`;\n\n      const response = await fetch(streamUrl);\n      if (!response.ok) throw new Error('Failed to stream logs');\n\n      const reader = response.body?.getReader();\n      if (!reader) throw new Error('Stream not available');\n\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            try {\n              const parsed = JSON.parse(line.slice(6));\n              if (parsed && typeof parsed === 'object' && 'id' in parsed && 'timestamp' in parsed) {\n                setLogs((prev) => [...prev, parsed as LogEntry]);\n              }\n            } catch (e) {\n              console.error('Failed to parse log:', e);\n            }\n          } else if (line.startsWith('event: complete')) {\n            onStreamingChange(false);\n            return;\n          }\n        }\n      }\n    } catch (err: unknown) {\n      console.error('Streaming error:', err instanceof Error ? err.message : String(err));\n      onStreamingChange(false);\n    }\n  }, [conversationId, generationId, onStreamingChange]);\n\n  // Auto-scroll to bottom when new logs arrive\n  useEffect(() => {\n    if (autoScroll && logsEndRef.current) {\n      logsEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [logs, autoScroll]);\n\n  // Fetch logs\n  useEffect(() => {\n    if (!conversationId && !generationId) {\n      setLogs([]);\n      return;\n    }\n\n    // Cancel previous request\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n\n    abortControllerRef.current = new AbortController();\n    \n    const fetchLogs = async () => {\n      setIsLoading(true);\n      setError(null);\n      onStreamingChange(false);\n\n      try {\n        let shouldStream = false;\n\n        if (generationId) {\n          // Fetch specific generation\n          const response = await fetch(`/api/v1/generations/${generationId}/logs`, {\n            signal: abortControllerRef.current?.signal,\n          });\n          \n          if (!response.ok) throw new Error('Failed to fetch logs');\n          \n          const data = await response.json() as unknown;\n          if (isLogPayload(data)) {\n            setLogs(data.logs as LogEntry[]);\n          }\n          \n          // Check if generation is still active - if so, stream it\n          const genResponse = await fetch(`/api/v1/generations/${generationId}`);\n          const generation = await genResponse.json() as unknown;\n          const gen = generation as Record<string, unknown>;\n          if (gen && typeof gen.status === 'string') {\n            shouldStream = gen.status === 'generating';\n          }\n          \n        } else if (conversationId) {\n          // Fetch conversation logs\n          const response = await fetch(`/api/v1/conversations/${conversationId}/logs`, {\n            signal: abortControllerRef.current?.signal,\n          });\n          \n          if (!response.ok) throw new Error('Failed to fetch logs');\n          \n          const data = await response.json() as unknown;\n          if (isLogPayload(data)) {\n            setLogs(data.logs as LogEntry[]);\n          }\n          \n          // Check if any generation is active\n          const stateResponse = await fetch(`/api/v1/conversations/${conversationId}/generation-state`);\n          const state = await stateResponse.json() as unknown;\n          const st = state as Record<string, unknown>;\n          if (st && typeof st.isGenerating === 'boolean') {\n            shouldStream = st.isGenerating as boolean;\n          }\n        }\n\n        setIsLoading(false);\n\n        // Start streaming if generation is active\n        if (shouldStream) {\n          startStreaming();\n        }\n      } catch (err: unknown) {\n        // Normalize error and ignore AbortError\n        const eObj = err as Record<string, unknown> | null;\n        const isAbort = eObj && typeof eObj.name === 'string' && eObj.name === 'AbortError';\n        const message = isAbort ? null : (err instanceof Error ? err.message : String(err));\n\n        if (message) {\n          setError(message);\n          setIsLoading(false);\n        }\n      }\n    };\n\n    fetchLogs();\n\n    return () => {\n      abortControllerRef.current?.abort();\n    };\n  }, [conversationId, generationId, startStreaming, onStreamingChange]);\n\n  // Stream logs (already declared above)\n\n  // Filter logs\n  const filteredLogs = logs.filter((log) => {\n    if (filterLevel !== 'all' && log.level !== filterLevel) return false;\n    if (filterCategory !== 'all' && log.category !== filterCategory) return false;\n    if (!showThoughts && log.category === 'thought') return false;\n    return true;\n  });\n\n  // Render empty state\n  if (!conversationId && !generationId) {\n    return (\n      <div className=\"bg-gray-900 rounded-lg border border-gray-800 p-12 text-center\">\n        <div className=\"text-6xl mb-4\">üìù</div>\n        <h2 className=\"text-xl font-semibold text-gray-300 mb-2\">\n          No logs selected\n        </h2>\n        <p className=\"text-gray-500\">\n          Enter a conversation ID or generation ID to view logs\n        </p>\n      </div>\n    );\n  }\n\n  // Render loading state\n  if (isLoading) {\n    return (\n      <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-12 text-center\">\n        <div className=\"inline-block w-8 h-8 border-4 border-[var(--background)] border-t-[var(--red-primary)] rounded-full animate-spin mb-4\"></div>\n        <p className=\"text-[var(--foreground)] opacity-60\">Loading logs...</p>\n      </div>\n    );\n  }\n\n  // Render error state\n  if (error) {\n    return (\n      <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-6\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"text-2xl\">‚ùå</div>\n          <div>\n            <h3 className=\"font-semibold text-[var(--red-primary)] mb-1\">Error loading logs</h3>\n            <p className=\"text-[var(--foreground)] opacity-60 text-sm\">{error}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n  <div className={cardClass}>\n      {/* Toolbar */}\n      <div className={toolbarClass}>\n        <div className=\"text-sm text-[var(--foreground)] opacity-70\">\n          <span className=\"font-medium\">{filteredLogs.length}</span> {filteredLogs.length === 1 ? 'log' : 'logs'}\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setAutoScroll(!autoScroll)}\n            className={`${toolbarBtn} ${autoScroll ? toolbarActive : ''}`}\n            title={autoScroll ? 'Disable auto-scroll' : 'Enable auto-scroll'}\n          >\n            {autoScroll ? 'üìå Auto' : 'üìå'}\n          </button>\n          <button\n            onClick={() => setCompact(!compact)}\n            className={`${toolbarBtn} ${compact ? toolbarActive : ''}`}\n            title={compact ? 'Disable compact view' : 'Enable compact view'}\n          >\n            {compact ? 'ÔøΩ Compact' : 'ÔøΩ'}\n          </button>\n          <button\n            onClick={() => setLogs([])}\n            className={toolbarBtn}\n            title=\"Clear logs\"\n          >\n            üóëÔ∏è\n          </button>\n          <button\n            onClick={() => {\n              const text = filteredLogs\n                .map((log) => `[${new Date(log.timestamp).toISOString()}] [${log.level}] ${stripColorTags(log.message)}`)\n                .join('\\n');\n              navigator.clipboard.writeText(text);\n            }}\n            className={toolbarBtn}\n            title=\"Copy logs\"\n          >\n            üìã\n          </button>\n        </div>\n      </div>\n\n      {/* Logs */}\n      <div className=\"p-4 max-h-[70vh] overflow-y-auto font-sans text-sm\">\n        {filteredLogs.length === 0 ? (\n          <div className=\"text-center py-12 text-[var(--foreground)] opacity-60\">\n            No logs match the current filters\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {filteredLogs.map((log) => (\n              <LogLine key={log.id} log={log} compact={compact} />\n            ))}\n            <div ref={logsEndRef} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Individual log line component\nfunction LogLine({ log, compact }: { log: LogEntry; compact?: boolean }) {\n  const levelColors: Record<string, string> = {\n    debug: 'text-gray-500',\n    info: 'text-blue-400',\n    success: 'text-green-400',\n    warning: 'text-yellow-400',\n    error: 'text-red-400',\n  };\n\n  const levelIcons: Record<string, string> = {\n    debug: 'üêõ',\n    info: '‚ÑπÔ∏è',\n    success: '‚úÖ',\n    warning: '‚ö†Ô∏è',\n    error: '‚ùå',\n  };\n\n  const timestamp = new Date(log.timestamp).toLocaleTimeString('en-US', {\n    hour12: false,\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    fractionalSecondDigits: 3,\n  });\n\n  // Parse color tags to HTML\n  const messageHtml = parseColorTagsToHtml(log.message);\n  const [expanded, setExpanded] = useState(false);\n\n  return (\n    <div className={`${logLineClass} ${compact ? 'py-2 px-2' : 'py-3 px-3'}`}>\n      {/* Metadata line */}\n      <div className={`flex items-center gap-3 ${compact ? 'mb-1' : 'mb-2'} flex-wrap`}>\n        <span className=\"text-[var(--foreground)]/70 text-xs tabular-nums shrink-0\">{timestamp}</span>\n        <span className=\"shrink-0\" title={log.level}>{levelIcons[log.level] || '‚Ä¢'}</span>\n        <span className={`shrink-0 text-xs uppercase font-semibold ${levelColors[log.level]}`}>{log.level}</span>\n        <span className=\"shrink-0 text-xs text-[var(--foreground)]/60 uppercase\">{log.category}</span>\n\n        {/* Expand / collapse */}\n        <button\n          onClick={() => setExpanded((s) => !s)}\n          className=\"ml-auto text-xs px-2 py-1 rounded bg-[var(--background)] text-[var(--foreground)] hover:bg-[var(--background)]/60\"\n          title={expanded ? 'Collapse' : 'Expand'}\n        >\n          {expanded ? '‚ñæ' : '‚ñ∏'}\n        </button>\n      </div>\n\n      {/* Message line */}\n      {(!compact || expanded) && (\n        <div className=\"pl-2 break-words text-sm leading-relaxed font-mono text-[var(--foreground)]/90\">\n          <div dangerouslySetInnerHTML={{ __html: messageHtml }} />\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * LogFilters - Sidebar filters for log viewer\n */\n'use client';\n\ninterface LogFiltersProps {\n  conversationId: string;\n  setConversationId: (id: string) => void;\n  generationId: string;\n  setGenerationId: (id: string) => void;\n  filterLevel: string;\n  setFilterLevel: (level: string) => void;\n  filterCategory: string;\n  setFilterCategory: (category: string) => void;\n  showThoughts: boolean;\n  setShowThoughts: (show: boolean) => void;\n}\n\nexport function LogFilters({\n  conversationId,\n  setConversationId,\n  generationId,\n  setGenerationId,\n  filterLevel,\n  setFilterLevel,\n  filterCategory,\n  setFilterCategory,\n  showThoughts,\n  setShowThoughts,\n}: LogFiltersProps) {\n  return (\n    <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-4 space-y-4\">\n      <h2 className=\"text-lg font-semibold text-[var(--foreground)] mb-4\">Filters</h2>\n\n      {/* Conversation ID */}\n      <div>\n        <label className=\"block text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">\n          Conversation ID\n        </label>\n        <input\n          type=\"text\"\n          value={conversationId}\n          onChange={(e) => {\n            setConversationId(e.target.value);\n            setGenerationId(''); // Clear generation when conversation changes\n          }}\n          placeholder=\"conv_...\"\n          className=\"w-full px-3 py-2 bg-[var(--background)] border border-[var(--border-color)] rounded text-sm text-[var(--foreground)] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--red-primary)]\"\n        />\n      </div>\n\n      {/* Generation ID */}\n      <div>\n        <label className=\"block text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">\n          Generation ID\n        </label>\n        <input\n          type=\"text\"\n          value={generationId}\n          onChange={(e) => {\n            setGenerationId(e.target.value);\n            setConversationId(''); // Clear conversation when generation is set\n          }}\n          placeholder=\"gen_...\"\n          className=\"w-full px-3 py-2 bg-[var(--background)] border border-[var(--border-color)] rounded text-sm text-[var(--foreground)] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--red-primary)]\"\n        />\n      </div>\n\n      <div className=\"border-t border-[var(--border-color)] pt-4\"></div>\n\n      {/* Level Filter */}\n      <div>\n        <label className=\"block text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">\n          Log Level\n        </label>\n        <select\n          value={filterLevel}\n          onChange={(e) => setFilterLevel(e.target.value)}\n          className=\"w-full px-3 py-2 bg-[var(--background)] border border-[var(--border-color)] rounded text-sm text-[var(--foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--red-primary)]\"\n        >\n          <option value=\"all\">All Levels</option>\n          <option value=\"debug\">üêõ Debug</option>\n          <option value=\"info\">‚ÑπÔ∏è Info</option>\n          <option value=\"success\">‚úÖ Success</option>\n          <option value=\"warning\">‚ö†Ô∏è Warning</option>\n          <option value=\"error\">‚ùå Error</option>\n        </select>\n      </div>\n\n      {/* Category Filter */}\n      <div>\n        <label className=\"block text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">\n          Category\n        </label>\n        <select\n          value={filterCategory}\n          onChange={(e) => setFilterCategory(e.target.value)}\n          className=\"w-full px-3 py-2 bg-[var(--background)] border border-[var(--border-color)] rounded text-sm text-[var(--foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--red-primary)]\"\n        >\n          <option value=\"all\">All Categories</option>\n          <option value=\"generation\">üîÑ Generation</option>\n          <option value=\"router\">üß≠ Router</option>\n          <option value=\"tool\">üîß Tool</option>\n          <option value=\"chat\">üí¨ Chat</option>\n          <option value=\"thought\">üí≠ Thought</option>\n        </select>\n      </div>\n\n      {/* Show Thoughts Toggle */}\n      <div>\n        <label className=\"flex items-center gap-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showThoughts}\n            onChange={(e) => setShowThoughts(e.target.checked)}\n            className=\"w-4 h-4 rounded border-[var(--border-color)] bg-[var(--background)] text-[var(--red-primary)] focus:ring-2 focus:ring-[var(--red-primary)]\"\n          />\n          <span className=\"text-sm text-[var(--foreground)] opacity-70\">\n            üí≠ Show Thoughts\n          </span>\n        </label>\n        <p className=\"text-xs text-[var(--foreground)] opacity-50 mt-1 ml-6\">\n          Internal reasoning from AI nodes\n        </p>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"border-t border-[var(--border-color)] pt-4 space-y-2\">\n        <button\n          onClick={() => {\n            setFilterLevel('all');\n            setFilterCategory('all');\n            setShowThoughts(true);\n          }}\n          className=\"w-full px-3 py-2 bg-[var(--background)] hover:bg-[var(--sidebar-bg)] text-sm text-[var(--foreground)] opacity-70 hover:opacity-100 rounded transition-all\"\n        >\n          Reset Filters\n        </button>\n        <button\n          onClick={() => {\n            setConversationId('');\n            setGenerationId('');\n          }}\n          className=\"w-full px-3 py-2 bg-[var(--background)] hover:bg-[var(--sidebar-bg)] text-sm text-[var(--foreground)] opacity-70 hover:opacity-100 rounded transition-all\"\n        >\n          Clear IDs\n        </button>\n      </div>\n    </div>\n  );\n}\n","/**\n * LogStats - Display statistics for a conversation\n */\n'use client';\n\nimport { useState, useEffect } from 'react';\n\ninterface LogStatsProps {\n  conversationId: string;\n}\n\ninterface Stats {\n  totalLogs: number;\n  generationCount: number;\n  isGenerating: boolean;\n  byLevel: Record<string, number>;\n  byCategory: Record<string, number>;\n}\n\nexport function LogStats({ conversationId }: LogStatsProps) {\n  const [stats, setStats] = useState<Stats | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (!conversationId) {\n      setStats(null);\n      return;\n    }\n\n    const fetchStats = async () => {\n      setIsLoading(true);\n      try {\n        const response = await fetch(`/api/v1/logs/stats?conversationId=${conversationId}`);\n        if (response.ok) {\n          const data = await response.json();\n          setStats(data);\n        }\n      } catch (err) {\n        console.error('Failed to fetch stats:', err);\n      }\n      setIsLoading(false);\n    };\n\n    fetchStats();\n    \n    // Refresh stats every 5 seconds if generating\n    const interval = setInterval(() => {\n      // Only refresh periodically while generating\n      if (stats?.isGenerating) {\n        fetchStats();\n      }\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [conversationId, stats?.isGenerating]);\n\n  if (!conversationId) return null;\n\n  if (isLoading && !stats) {\n    return (\n      <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-4\">\n        <div className=\"animate-pulse space-y-3\">\n          <div className=\"h-4 bg-[var(--background)] rounded w-3/4\"></div>\n          <div className=\"h-4 bg-[var(--background)] rounded w-1/2\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!stats) return null;\n\n  return (\n    <div className=\"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] p-4 space-y-4\">\n      <h2 className=\"text-lg font-semibold text-[var(--foreground)] mb-4\">Statistics</h2>\n\n      {/* Overview */}\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-[var(--foreground)] opacity-60\">Total Logs</span>\n          <span className=\"text-[var(--foreground)] font-semibold\">{stats.totalLogs}</span>\n        </div>\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-[var(--foreground)] opacity-60\">Generations</span>\n          <span className=\"text-[var(--foreground)] font-semibold\">{stats.generationCount}</span>\n        </div>\n        <div className=\"flex justify-between text-sm\">\n          <span className=\"text-[var(--foreground)] opacity-60\">Status</span>\n          <span className={stats.isGenerating ? 'text-[var(--red-primary)]' : 'text-[var(--foreground)] opacity-40'}>\n            {stats.isGenerating ? 'üü¢ Active' : '‚ö™ Idle'}\n          </span>\n        </div>\n      </div>\n\n      {/* By Level */}\n      <div className=\"border-t border-[var(--border-color)] pt-4\">\n        <h3 className=\"text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">By Level</h3>\n        <div className=\"space-y-2\">\n          {Object.entries(stats.byLevel).map(([level, count]) => {\n            const icons: Record<string, string> = {\n              debug: 'üêõ',\n              info: '‚ÑπÔ∏è',\n              success: '‚úÖ',\n              warning: '‚ö†Ô∏è',\n              error: '‚ùå',\n            };\n            const colors: Record<string, string> = {\n              debug: 'text-gray-500',\n              info: 'text-blue-400',\n              success: 'text-green-400',\n              warning: 'text-yellow-400',\n              error: 'text-red-400',\n            };\n            \n            const percentage = stats.totalLogs > 0 ? (count / stats.totalLogs) * 100 : 0;\n            \n            return (\n              <div key={level}>\n                <div className=\"flex justify-between text-xs mb-1\">\n                  <span className={colors[level]}>\n                    {icons[level]} {level}\n                  </span>\n                  <span className=\"text-[var(--foreground)] opacity-60\">{count}</span>\n                </div>\n                <div className=\"w-full bg-[var(--background)] rounded-full h-1.5\">\n                  <div\n                    className={`h-1.5 rounded-full ${colors[level].replace('text-', 'bg-')}`}\n                    style={{ width: `${percentage}%` }}\n                  ></div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* By Category */}\n      <div className=\"border-t border-[var(--border-color)] pt-4\">\n        <h3 className=\"text-sm font-medium text-[var(--foreground)] opacity-70 mb-2\">By Category</h3>\n        <div className=\"space-y-2\">\n          {Object.entries(stats.byCategory).map(([category, count]) => {\n            const icons: Record<string, string> = {\n              generation: 'üîÑ',\n              router: 'üß≠',\n              tool: 'üîß',\n              chat: 'üí¨',\n              thought: 'üí≠',\n            };\n            \n            const percentage = stats.totalLogs > 0 ? (count / stats.totalLogs) * 100 : 0;\n            \n            return (\n              <div key={category} className=\"space-y-1\">\n                <div className=\"flex justify-between text-xs\">\n                  <span className=\"text-[var(--foreground)] opacity-60\">\n                    {icons[category]} {category}\n                  </span>\n                  <span className=\"text-[var(--foreground)] font-medium\">{count}</span>\n                </div>\n                <div className=\"w-full bg-[var(--background)] rounded-full h-1.5\">\n                  <div\n                    className={`h-1.5 rounded-full bg-[var(--red-primary)]`}\n                    style={{ width: `${percentage}%` }}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}